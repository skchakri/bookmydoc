<%# Turbo Stream response for marking notification as read %>

<turbo-stream action="replace" target="notification_<%= @notification.id %>">
  <template>
    <div id="notification_<%= @notification.id %>" class="border-l-4 border-gray-300 bg-gray-50 p-3 rounded opacity-60">
      <div class="flex items-start justify-between">
        <div class="flex-1">
          <h4 class="text-sm font-medium text-gray-700"><%= @notification.title %></h4>
          <% if @notification.body.present? %>
            <p class="text-sm text-gray-600 mt-1"><%= @notification.body %></p>
          <% end %>
          <p class="text-xs text-gray-500 mt-2">
            <%= time_ago_in_words(@notification.created_at) %> ago â€¢ Read
          </p>
        </div>
      </div>
    </div>
  </template>
</turbo-stream>

<turbo-stream action="update" target="notification-badge">
  <template>
    <% unread_count = current_user.unread_notifications_count %>
    <% if unread_count > 0 %>
      <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"></span>
    <% end %>
  </template>
</turbo-stream>
